module.exports=[35785,a=>{"use strict";a.s(["GRADE_OPTIONS",0,["S1","S2","S3","S4","S5","S6","retaker","P1","P2","P3","P4","P5","P6"],"SUBJECT_OPTIONS",0,["中文","英文","數學","物理","化學","生物","M1","M2","經濟","會計","歷史","中史","地理","其他"]])},91119,a=>{"use strict";var b=a.i(87924),c=a.i(68114);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},6013,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(15925),e=a.i(91119),f=a.i(80701),g=a.i(6015),h=a.i(35785);function i({courses:a}){let i=(0,d.useTranslations)(),j=new Date,[k,l]=(0,c.useState)("teacher-month"),[m,n]=(0,c.useState)(`${j.getFullYear()}-${String(j.getMonth()+1).padStart(2,"0")}`),o=(0,c.useMemo)(()=>{let a=[];for(let b=0;b<12;b++){let c=new Date(j.getFullYear(),j.getMonth()-b,1),d=`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}`,e=`${c.getFullYear()}年${c.getMonth()+1}月`;a.push({value:d,label:e})}return a},[j]),p=(0,c.useMemo)(()=>{let[b,c]=m.split("-").map(Number),d=new Date(b,c-1,1),e=new Date(b,c,0,23,59,59,999),f=b=>b?a.filter(a=>a.sessions.some(a=>{let b=new Date(a.date);return b>=d&&b<=e})):a;if("teacher-month"===k||"teacher-total"===k){let a=f("teacher-month"===k),b={};for(let c of a){let a=c.teacher.id;for(let d of(b[a]||(b[a]={teacherCode:c.teacher.teacherCode,name:c.teacher.name,studentCodes:new Set}),c.enrollments))b[a].studentCodes.add(d.student.studentCode)}return Object.entries(b).map(([a,b])=>({id:a,teacherCode:b.teacherCode,name:b.name,count:b.studentCodes.size})).sort((a,b)=>b.count-a.count)}{let a=f("subject-month"===k),b={};for(let c of a)for(let a of c.teacher.subjects)for(let d of(b[a]||(b[a]=new Set),c.enrollments))b[a].add(d.student.studentCode);return h.SUBJECT_OPTIONS.filter(a=>b[a]&&b[a].size>0).map(a=>({subject:a,count:b[a]?.size||0})).sort((a,b)=>b.count-a.count)}},[a,k,m]),q=k.startsWith("teacher");return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:i("stats.enrollments")}),(0,b.jsx)(e.CardDescription,{children:i("stats.totalStudents")})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,b.jsx)("div",{className:"w-48",children:(0,b.jsxs)(f.Select,{value:k,onValueChange:a=>l(a),children:[(0,b.jsx)(f.SelectTrigger,{children:(0,b.jsx)(f.SelectValue,{})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"teacher-month",children:i("stats.byTeacherMonthly")}),(0,b.jsx)(f.SelectItem,{value:"teacher-total",children:i("stats.byTeacherCumulative")}),(0,b.jsx)(f.SelectItem,{value:"subject-month",children:i("stats.bySubjectMonthly")}),(0,b.jsx)(f.SelectItem,{value:"subject-total",children:"按科目（累积）"})]})]})}),("teacher-month"===k||"subject-month"===k)&&(0,b.jsx)("div",{className:"w-40",children:(0,b.jsxs)(f.Select,{value:m,onValueChange:n,children:[(0,b.jsx)(f.SelectTrigger,{children:(0,b.jsx)(f.SelectValue,{})}),(0,b.jsx)(f.SelectContent,{children:o.map(a=>(0,b.jsx)(f.SelectItem,{value:a.value,children:a.label},a.value))})]})})]})})]}),(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)(g.Table,{children:[(0,b.jsx)(g.TableHeader,{children:(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableHead,{children:i(q?"auth.teacher":"teachers.subjects")}),q&&(0,b.jsx)(g.TableHead,{children:i("teachers.teacherCode")}),(0,b.jsx)(g.TableHead,{className:"text-right",children:i("courses.studentCount")})]})}),(0,b.jsx)(g.TableBody,{children:0===p.length?(0,b.jsx)(g.TableRow,{children:(0,b.jsx)(g.TableCell,{colSpan:q?3:2,className:"h-24 text-center text-muted-foreground",children:i("stats.noData")})}):q?p.map(a=>(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableCell,{className:"font-medium",children:a.name}),(0,b.jsx)(g.TableCell,{className:"font-mono",children:a.teacherCode}),(0,b.jsx)(g.TableCell,{className:"text-right",children:a.count})]},a.id)):p.map(a=>(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableCell,{className:"font-medium",children:a.subject}),(0,b.jsx)(g.TableCell,{className:"text-right",children:a.count})]},a.subject))})]})})})]})}a.s(["EnrollmentStats",()=>i])}];

//# sourceMappingURL=src_a9da3e35._.js.map