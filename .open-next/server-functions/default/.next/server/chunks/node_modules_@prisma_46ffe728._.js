module.exports=[54941,86427,e=>{"use strict";var t,r,n,i,s=Object.defineProperty,a={},o={$:()=>c,bgBlack:()=>D,bgBlue:()=>B,bgCyan:()=>L,bgGreen:()=>S,bgMagenta:()=>U,bgRed:()=>O,bgWhite:()=>q,bgYellow:()=>k,black:()=>v,blue:()=>_,bold:()=>h,cyan:()=>C,dim:()=>d,gray:()=>R,green:()=>b,grey:()=>x,hidden:()=>E,inverse:()=>g,italic:()=>f,magenta:()=>N,red:()=>w,reset:()=>p,strikethrough:()=>T,underline:()=>y,white:()=>A,yellow:()=>I};for(var u in o)s(a,u,{get:o[u],enumerable:!0});var l=!0;"undefined"!=typeof process&&({FORCE_COLOR:t,NODE_DISABLE_COLORS:r,NO_COLOR:n,TERM:i}=process.env||{},l=process.stdout&&process.stdout.isTTY);var c={enabled:!r&&null==n&&"dumb"!==i&&(null!=t&&"0"!==t||l)};function m(e,t){let r=RegExp(`\\x1b\\[${t}m`,"g"),n=`\x1b[${e}m`,i=`\x1b[${t}m`;return function(e){return c.enabled&&null!=e?n+(~(""+e).indexOf(i)?e.replace(r,i+n):e)+i:e}}var p=m(0,0),h=m(1,22),d=m(2,22),f=m(3,23),y=m(4,24),g=m(7,27),E=m(8,28),T=m(9,29),v=m(30,39),w=m(31,39),b=m(32,39),I=m(33,39),_=m(34,39),N=m(35,39),C=m(36,39),A=m(37,39),R=m(90,39),x=m(90,39),D=m(40,49),O=m(41,49),S=m(42,49),k=m(43,49),B=m(44,49),U=m(45,49),L=m(46,49),q=m(47,49),P=["green","yellow","blue","magenta","cyan","red"],G=[],$=Date.now(),F=0,M="undefined"!=typeof process?process.env:{};globalThis.DEBUG??=M.DEBUG??"",globalThis.DEBUG_COLORS??=!M.DEBUG_COLORS||"true"===M.DEBUG_COLORS;var W={enable(e){"string"==typeof e&&(globalThis.DEBUG=e)},disable(){let e=globalThis.DEBUG;return globalThis.DEBUG="",e},enabled(e){let t=globalThis.DEBUG.split(",").map(e=>e.replace(/[.+?^${}()|[\]\\]/g,"\\$&")),r=t.some(t=>""!==t&&"-"!==t[0]&&e.match(RegExp(t.split("*").join(".*")+"$"))),n=t.some(t=>""!==t&&"-"===t[0]&&e.match(RegExp(t.slice(1).split("*").join(".*")+"$")));return r&&!n},log:(...e)=>{let[t,r,...n]=e;(console.warn??console.log)(`${t} ${r}`,...n)},formatters:{}},j=new Proxy(function(e){let t={color:P[F++%P.length],enabled:W.enabled(e),namespace:e,log:W.log,extend:()=>{}};return new Proxy((...e)=>{let{enabled:r,namespace:n,color:i,log:s}=t;if(0!==e.length&&G.push([n,...e]),G.length>100&&G.shift(),W.enabled(n)||r){let t=e.map(e=>"string"==typeof e?e:function(e,t=2){let r=new Set;return JSON.stringify(e,(e,t)=>{if("object"==typeof t&&null!==t){if(r.has(t))return"[Circular *]";r.add(t)}else if("bigint"==typeof t)return t.toString();return t},t)}(e)),r=`+${Date.now()-$}ms`;$=Date.now(),globalThis.DEBUG_COLORS?s(a[i](h(n)),...t,a[i](r)):s(n,...t,r)}},{get:(e,r)=>t[r],set:(e,r,n)=>t[r]=n})},{get:(e,t)=>W[t],set:(e,t,r)=>W[t]=r});e.s(["Debug",()=>j],54941);var Q=class extends Error{name="DriverAdapterError";cause;constructor(e){super("string"==typeof e.message?e.message:e.kind),this.cause=e}};j("driver-adapter-utils");var V={Int32:0,Int64:1,Float:2,Double:3,Numeric:4,Boolean:5,Character:6,Text:7,Date:8,Time:9,DateTime:10,Json:11,Enum:12,Bytes:13,Set:14,Uuid:15,Int32Array:64,Int64Array:65,FloatArray:66,DoubleArray:67,NumericArray:68,BooleanArray:69,CharacterArray:70,TextArray:71,DateArray:72,TimeArray:73,DateTimeArray:74,JsonArray:75,EnumArray:76,BytesArray:77,UuidArray:78,UnknownNumber:128};Error("Not implemented: queryRaw"),Error("Not implemented: executeRaw"),Error("Not implemented: startTransaction"),Error("Not implemented: executeScript"),Error("Not implemented: dispose"),e.s(["ColumnTypeEnum",()=>V,"DriverAdapterError",()=>Q],86427)},67132,e=>{"use strict";var t=e.i(54941),r=e.i(86427),n=e.i(85148);Error("timeout while waiting for mutex to become available"),Error("mutex already locked");var i=Error("request for lock canceled"),s=class{constructor(e,t=i){this._value=e,this._cancelError=t,this._queue=[],this._weightedWaiters=[]}acquire(e=1,t=0){if(e<=0)throw Error(`invalid weight ${e}: must be positive`);return new Promise((r,n)=>{let i={resolve:r,reject:n,weight:e,priority:t},s=a(this._queue,e=>t<=e.priority);-1===s&&e<=this._value?this._dispatchItem(i):this._queue.splice(s+1,0,i)})}runExclusive(e){var t,r,n,i;return t=this,r=arguments,n=void 0,i=function*(e,t=1,r=0){let[n,i]=yield this.acquire(t,r);try{return yield e(n)}finally{i()}},new(n||(n=Promise))(function(e,s){function a(e){try{u(i.next(e))}catch(e){s(e)}}function o(e){try{u(i.throw(e))}catch(e){s(e)}}function u(t){var r;t.done?e(t.value):((r=t.value)instanceof n?r:new n(function(e){e(r)})).then(a,o)}u((i=i.apply(t,r||[])).next())})}waitForUnlock(e=1,t=0){if(e<=0)throw Error(`invalid weight ${e}: must be positive`);return this._couldLockImmediately(e,t)?Promise.resolve():new Promise(r=>{var n,i;let s;this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),n=this._weightedWaiters[e-1],i={resolve:r,priority:t},s=a(n,e=>i.priority<=e.priority),n.splice(s+1,0,i)})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatchQueue()}release(e=1){if(e<=0)throw Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatchQueue()}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(e){let t=this._value;this._value-=e.weight,e.resolve([t,this._newReleaser(e.weight)])}_newReleaser(e){let t=!1;return()=>{t||(t=!0,this.release(e))}}_drainUnlockWaiters(){if(0===this._queue.length)for(let e=this._value;e>0;e--){let t=this._weightedWaiters[e-1];t&&(t.forEach(e=>e.resolve()),this._weightedWaiters[e-1]=[])}else{let e=this._queue[0].priority;for(let t=this._value;t>0;t--){let r=this._weightedWaiters[t-1];if(!r)continue;let n=r.findIndex(t=>t.priority<=e);(-1===n?r:r.splice(0,n)).forEach(e=>e.resolve())}}}_couldLockImmediately(e,t){return(0===this._queue.length||this._queue[0].priority<t)&&e<=this._value}};function a(e,t){for(let r=e.length-1;r>=0;r--)if(t(e[r]))return r;return -1}var o=class{constructor(e){this._semaphore=new s(1,e)}acquire(){var e,t,r,n;return e=this,t=arguments,r=void 0,n=function*(e=0){let[,t]=yield this._semaphore.acquire(1,e);return t},new(r||(r=Promise))(function(i,s){function a(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,o)}u((n=n.apply(e,t||[])).next())})}runExclusive(e,t=0){return this._semaphore.runExclusive(()=>e(),1,t)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(e=0){return this._semaphore.waitForUnlock(1,e)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}},u="@prisma/adapter-better-sqlite3",l=(0,t.Debug)("prisma:driver-adapter:better-sqlite3:conversion"),c=class extends Error{name="UnexpectedTypeError";constructor(e){const t=typeof e;super(`unexpected value of type ${t}: ${"object"===t?JSON.stringify(e):String(e)}`)}};function m(e,t,r){if(null===e)return null;if("string"==typeof e&&"int"===t.scalarType)return Number.parseInt(e);if("string"==typeof e&&"float"===t.scalarType||"string"==typeof e&&"decimal"===t.scalarType)return Number.parseFloat(e);if("string"==typeof e&&"bigint"===t.scalarType)return BigInt(e);if("boolean"==typeof e)return+!!e;if("string"==typeof e&&"datetime"===t.scalarType&&(e=new Date(e)),e instanceof Date){let t=r?.timestampFormat??"iso8601";switch(t){case"unixepoch-ms":return e.getTime();case"iso8601":return e.toISOString().replace("Z","+00:00");default:throw Error(`Unknown timestamp format: ${t}`)}}return"string"==typeof e&&"bytes"===t.scalarType?Buffer.from(e,"base64"):e}var p=(0,t.Debug)("prisma:driver-adapter:better-sqlite3"),h=class{constructor(e,t){this.client=e,this.adapterOptions=t}provider="sqlite";adapterName=u;async queryRaw(e){p("[js::queryRaw] %O",e);let{columnNames:t,declaredTypes:n,values:i}=await this.performIO(e),s=function(e,t){let n,[i,s]=(n=new Set,[e.map((e,t)=>{let i=function(e){if(null===e)return null;switch(e.toUpperCase()){case"":return null;case"DECIMAL":return r.ColumnTypeEnum.Numeric;case"FLOAT":return r.ColumnTypeEnum.Float;case"DOUBLE":case"DOUBLE PRECISION":case"NUMERIC":case"REAL":return r.ColumnTypeEnum.Double;case"TINYINT":case"SMALLINT":case"MEDIUMINT":case"INT":case"INTEGER":case"SERIAL":case"INT2":return r.ColumnTypeEnum.Int32;case"BIGINT":case"UNSIGNED BIG INT":case"INT8":return r.ColumnTypeEnum.Int64;case"DATETIME":case"TIMESTAMP":return r.ColumnTypeEnum.DateTime;case"TIME":return r.ColumnTypeEnum.Time;case"DATE":return r.ColumnTypeEnum.Date;case"TEXT":case"CLOB":case"CHARACTER":case"VARCHAR":case"VARYING CHARACTER":case"NCHAR":case"NATIVE CHARACTER":case"NVARCHAR":return r.ColumnTypeEnum.Text;case"BLOB":return r.ColumnTypeEnum.Bytes;case"BOOLEAN":return r.ColumnTypeEnum.Boolean;case"JSONB":return r.ColumnTypeEnum.Json;default:return l("unknown decltype:",e),null}}(e);return null===i&&n.add(t),i}),n]);if(0===s.size)return i;e:for(let e of s){for(let n=0;n<t.length;n++){let s=t[n][e];if(null!==s){i[e]=function(e){switch(typeof e){case"string":return r.ColumnTypeEnum.Text;case"bigint":return r.ColumnTypeEnum.Int64;case"boolean":return r.ColumnTypeEnum.Boolean;case"number":return r.ColumnTypeEnum.UnknownNumber;case"object":var t=e;if(t instanceof ArrayBuffer)return r.ColumnTypeEnum.Bytes;throw new c(t);default:throw new c(e)}}(s);continue e}}i[e]=r.ColumnTypeEnum.Int32}return i}(n,i);return{columnNames:t,columnTypes:s,rows:i.map(e=>(function(e,t){let n=[];for(let i=0;i<e.length;i++){let s=e[i];if("number"==typeof s&&(t[i]===r.ColumnTypeEnum.Int32||t[i]===r.ColumnTypeEnum.Int64)&&!Number.isInteger(s)){n[i]=Math.trunc(s);continue}if(["number","bigint"].includes(typeof s)&&t[i]===r.ColumnTypeEnum.DateTime){n[i]=new Date(Number(s)).toISOString();continue}if("bigint"==typeof s){n[i]=s.toString();continue}n[i]=s}return n})(e,s))}}async executeRaw(e){return p("[js::executeRaw] %O",e),(await this.executeIO(e)).changes}executeIO(e){try{let t=e.args.map((t,r)=>m(t,e.argTypes[r],this.adapterOptions)),r=this.client.prepare(e.sql).bind(t).run();return Promise.resolve(r)}catch(e){this.onError(e)}}performIO(e){try{let t=e.args.map((t,r)=>m(t,e.argTypes[r],this.adapterOptions)),r=this.client.prepare(e.sql).bind(t);if(!r.reader)return r.run(),Promise.resolve({columnNames:[],declaredTypes:[],values:[]});let n=r.columns(),i={declaredTypes:n.map(e=>e.type),columnNames:n.map(e=>e.name),values:r.raw().all()};return Promise.resolve(i)}catch(e){this.onError(e)}}onError(e){throw p("Error in performIO: %O",e),new r.DriverAdapterError(function(e){var t;if("string"==typeof(t=e).code&&"string"==typeof t.message)return{originalCode:e.code,originalMessage:e.message,...function(e){switch(e.code){case"SQLITE_BUSY":return{kind:"SocketTimeout"};case"SQLITE_CONSTRAINT_UNIQUE":case"SQLITE_CONSTRAINT_PRIMARYKEY":{let t=e.message.split("constraint failed: ").at(1)?.split(", ").map(e=>e.split(".").pop());return{kind:"UniqueConstraintViolation",constraint:void 0!==t?{fields:t}:void 0}}case"SQLITE_CONSTRAINT_NOTNULL":{let t=e.message.split("constraint failed: ").at(1)?.split(", ").map(e=>e.split(".").pop());return{kind:"NullConstraintViolation",constraint:void 0!==t?{fields:t}:void 0}}case"SQLITE_CONSTRAINT_FOREIGNKEY":case"SQLITE_CONSTRAINT_TRIGGER":return{kind:"ForeignKeyConstraintViolation",constraint:{foreignKey:{}}};default:if(e.message.startsWith("no such table"))return{kind:"TableDoesNotExist",table:e.message.split(": ").at(1)};if(e.message.startsWith("no such column"))return{kind:"ColumnNotFound",column:e.message.split(": ").at(1)};if(e.message.includes("has no column named "))return{kind:"ColumnNotFound",column:e.message.split("has no column named ").at(1)};throw e}}(e)};throw e}(e))}},d=class extends h{constructor(e,t,r,n){super(e,r),this.options=t,this.#e=n}#e;commit(){return p("[js::commit]"),this.#e(),Promise.resolve()}rollback(){return p("[js::rollback]"),this.#e(),Promise.resolve()}},f=class extends h{#t=new o;constructor(e,t){super(e,t)}executeScript(e){try{this.client.exec(e)}catch(e){this.onError(e)}return Promise.resolve()}async startTransaction(e){if(e&&"SERIALIZABLE"!==e)throw new r.DriverAdapterError({kind:"InvalidIsolationLevel",level:e});let t={usePhantomQuery:!1};p("%s options: %O","[js::startTransaction]",t);try{let e=await this.#t.acquire();return this.client.prepare("BEGIN").run(),new d(this.client,t,this.adapterOptions,e)}catch(e){this.onError(e)}}dispose(){return this.client.close(),Promise.resolve()}},y=class{provider="sqlite";adapterName=u;#r;#n;constructor(e,t){this.#r=e,this.#n=t}connect(){return Promise.resolve(new f(g(this.#r),this.#n))}connectToShadowDb(){let e=this.#n?.shadowDatabaseUrl??":memory:";return Promise.resolve(new f(g({...this.#r,url:e}),this.#n))}};function g(e){let{url:t,...r}=e,i=t.replace(/^file:/,""),s=new n.default(i,r);return s.defaultSafeIntegers(!0),s}e.s(["PrismaBetterSqlite3",()=>y])}];

//# sourceMappingURL=node_modules_%40prisma_46ffe728._.js.map