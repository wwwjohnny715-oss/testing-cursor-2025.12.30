module.exports=[71655,27029,a=>{"use strict";var b,c,d,e,f=Object.defineProperty,g={},h={$:()=>k,bgBlack:()=>E,bgBlue:()=>I,bgCyan:()=>K,bgGreen:()=>G,bgMagenta:()=>J,bgRed:()=>F,bgWhite:()=>L,bgYellow:()=>H,black:()=>u,blue:()=>y,bold:()=>n,cyan:()=>A,dim:()=>o,gray:()=>C,green:()=>w,grey:()=>D,hidden:()=>s,inverse:()=>r,italic:()=>p,magenta:()=>z,red:()=>v,reset:()=>m,strikethrough:()=>t,underline:()=>q,white:()=>B,yellow:()=>x};for(var i in h)f(g,i,{get:h[i],enumerable:!0});var j=!0;"undefined"!=typeof process&&({FORCE_COLOR:b,NODE_DISABLE_COLORS:c,NO_COLOR:d,TERM:e}=process.env||{},j=process.stdout&&process.stdout.isTTY);var k={enabled:!c&&null==d&&"dumb"!==e&&(null!=b&&"0"!==b||j)};function l(a,b){let c=RegExp(`\\x1b\\[${b}m`,"g"),d=`\x1b[${a}m`,e=`\x1b[${b}m`;return function(a){return k.enabled&&null!=a?d+(~(""+a).indexOf(e)?a.replace(c,e+d):a)+e:a}}var m=l(0,0),n=l(1,22),o=l(2,22),p=l(3,23),q=l(4,24),r=l(7,27),s=l(8,28),t=l(9,29),u=l(30,39),v=l(31,39),w=l(32,39),x=l(33,39),y=l(34,39),z=l(35,39),A=l(36,39),B=l(37,39),C=l(90,39),D=l(90,39),E=l(40,49),F=l(41,49),G=l(42,49),H=l(43,49),I=l(44,49),J=l(45,49),K=l(46,49),L=l(47,49),M=["green","yellow","blue","magenta","cyan","red"],N=[],O=Date.now(),P=0,Q="undefined"!=typeof process?process.env:{};globalThis.DEBUG??=Q.DEBUG??"",globalThis.DEBUG_COLORS??=!Q.DEBUG_COLORS||"true"===Q.DEBUG_COLORS;var R={enable(a){"string"==typeof a&&(globalThis.DEBUG=a)},disable(){let a=globalThis.DEBUG;return globalThis.DEBUG="",a},enabled(a){let b=globalThis.DEBUG.split(",").map(a=>a.replace(/[.+?^${}()|[\]\\]/g,"\\$&")),c=b.some(b=>""!==b&&"-"!==b[0]&&a.match(RegExp(b.split("*").join(".*")+"$"))),d=b.some(b=>""!==b&&"-"===b[0]&&a.match(RegExp(b.slice(1).split("*").join(".*")+"$")));return c&&!d},log:(...a)=>{let[b,c,...d]=a;(console.warn??console.log)(`${b} ${c}`,...d)},formatters:{}},S=new Proxy(function(a){let b={color:M[P++%M.length],enabled:R.enabled(a),namespace:a,log:R.log,extend:()=>{}};return new Proxy((...a)=>{let{enabled:c,namespace:d,color:e,log:f}=b;if(0!==a.length&&N.push([d,...a]),N.length>100&&N.shift(),R.enabled(d)||c){let b=a.map(a=>"string"==typeof a?a:function(a,b=2){let c=new Set;return JSON.stringify(a,(a,b)=>{if("object"==typeof b&&null!==b){if(c.has(b))return"[Circular *]";c.add(b)}else if("bigint"==typeof b)return b.toString();return b},b)}(a)),c=`+${Date.now()-O}ms`;O=Date.now(),globalThis.DEBUG_COLORS?f(g[e](n(d)),...b,g[e](c)):f(d,...b,c)}},{get:(a,c)=>b[c],set:(a,c,d)=>b[c]=d})},{get:(a,b)=>R[b],set:(a,b,c)=>R[b]=c});a.s(["Debug",()=>S],71655);var T=class extends Error{name="DriverAdapterError";cause;constructor(a){super("string"==typeof a.message?a.message:a.kind),this.cause=a}};S("driver-adapter-utils");var U={Int32:0,Int64:1,Float:2,Double:3,Numeric:4,Boolean:5,Character:6,Text:7,Date:8,Time:9,DateTime:10,Json:11,Enum:12,Bytes:13,Set:14,Uuid:15,Int32Array:64,Int64Array:65,FloatArray:66,DoubleArray:67,NumericArray:68,BooleanArray:69,CharacterArray:70,TextArray:71,DateArray:72,TimeArray:73,DateTimeArray:74,JsonArray:75,EnumArray:76,BytesArray:77,UuidArray:78,UnknownNumber:128};Error("Not implemented: queryRaw"),Error("Not implemented: executeRaw"),Error("Not implemented: startTransaction"),Error("Not implemented: executeScript"),Error("Not implemented: dispose"),a.s(["ColumnTypeEnum",()=>U,"DriverAdapterError",()=>T],27029)},47127,a=>{"use strict";var b=a.i(71655),c=a.i(27029),d=a.i(85148);Error("timeout while waiting for mutex to become available"),Error("mutex already locked");var e=Error("request for lock canceled"),f=class{constructor(a,b=e){this._value=a,this._cancelError=b,this._queue=[],this._weightedWaiters=[]}acquire(a=1,b=0){if(a<=0)throw Error(`invalid weight ${a}: must be positive`);return new Promise((c,d)=>{let e={resolve:c,reject:d,weight:a,priority:b},f=g(this._queue,a=>b<=a.priority);-1===f&&a<=this._value?this._dispatchItem(e):this._queue.splice(f+1,0,e)})}runExclusive(a){var b,c,d,e;return b=this,c=arguments,d=void 0,e=function*(a,b=1,c=0){let[d,e]=yield this.acquire(b,c);try{return yield a(d)}finally{e()}},new(d||(d=Promise))(function(a,f){function g(a){try{i(e.next(a))}catch(a){f(a)}}function h(a){try{i(e.throw(a))}catch(a){f(a)}}function i(b){var c;b.done?a(b.value):((c=b.value)instanceof d?c:new d(function(a){a(c)})).then(g,h)}i((e=e.apply(b,c||[])).next())})}waitForUnlock(a=1,b=0){if(a<=0)throw Error(`invalid weight ${a}: must be positive`);return this._couldLockImmediately(a,b)?Promise.resolve():new Promise(c=>{var d,e;let f;this._weightedWaiters[a-1]||(this._weightedWaiters[a-1]=[]),d=this._weightedWaiters[a-1],e={resolve:c,priority:b},f=g(d,a=>e.priority<=a.priority),d.splice(f+1,0,e)})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(a){this._value=a,this._dispatchQueue()}release(a=1){if(a<=0)throw Error(`invalid weight ${a}: must be positive`);this._value+=a,this._dispatchQueue()}cancel(){this._queue.forEach(a=>a.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(a){let b=this._value;this._value-=a.weight,a.resolve([b,this._newReleaser(a.weight)])}_newReleaser(a){let b=!1;return()=>{b||(b=!0,this.release(a))}}_drainUnlockWaiters(){if(0===this._queue.length)for(let a=this._value;a>0;a--){let b=this._weightedWaiters[a-1];b&&(b.forEach(a=>a.resolve()),this._weightedWaiters[a-1]=[])}else{let a=this._queue[0].priority;for(let b=this._value;b>0;b--){let c=this._weightedWaiters[b-1];if(!c)continue;let d=c.findIndex(b=>b.priority<=a);(-1===d?c:c.splice(0,d)).forEach(a=>a.resolve())}}}_couldLockImmediately(a,b){return(0===this._queue.length||this._queue[0].priority<b)&&a<=this._value}};function g(a,b){for(let c=a.length-1;c>=0;c--)if(b(a[c]))return c;return -1}var h=class{constructor(a){this._semaphore=new f(1,a)}acquire(){var a,b,c,d;return a=this,b=arguments,c=void 0,d=function*(a=0){let[,b]=yield this._semaphore.acquire(1,a);return b},new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}runExclusive(a,b=0){return this._semaphore.runExclusive(()=>a(),1,b)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(a=0){return this._semaphore.waitForUnlock(1,a)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}},i="@prisma/adapter-better-sqlite3",j=(0,b.Debug)("prisma:driver-adapter:better-sqlite3:conversion"),k=class extends Error{name="UnexpectedTypeError";constructor(a){const b=typeof a;super(`unexpected value of type ${b}: ${"object"===b?JSON.stringify(a):String(a)}`)}};function l(a,b,c){if(null===a)return null;if("string"==typeof a&&"int"===b.scalarType)return Number.parseInt(a);if("string"==typeof a&&"float"===b.scalarType||"string"==typeof a&&"decimal"===b.scalarType)return Number.parseFloat(a);if("string"==typeof a&&"bigint"===b.scalarType)return BigInt(a);if("boolean"==typeof a)return+!!a;if("string"==typeof a&&"datetime"===b.scalarType&&(a=new Date(a)),a instanceof Date){let b=c?.timestampFormat??"iso8601";switch(b){case"unixepoch-ms":return a.getTime();case"iso8601":return a.toISOString().replace("Z","+00:00");default:throw Error(`Unknown timestamp format: ${b}`)}}return"string"==typeof a&&"bytes"===b.scalarType?Buffer.from(a,"base64"):a}var m=(0,b.Debug)("prisma:driver-adapter:better-sqlite3"),n=class{constructor(a,b){this.client=a,this.adapterOptions=b}provider="sqlite";adapterName=i;async queryRaw(a){m("[js::queryRaw] %O",a);let{columnNames:b,declaredTypes:d,values:e}=await this.performIO(a),f=function(a,b){let d,[e,f]=(d=new Set,[a.map((a,b)=>{let e=function(a){if(null===a)return null;switch(a.toUpperCase()){case"":return null;case"DECIMAL":return c.ColumnTypeEnum.Numeric;case"FLOAT":return c.ColumnTypeEnum.Float;case"DOUBLE":case"DOUBLE PRECISION":case"NUMERIC":case"REAL":return c.ColumnTypeEnum.Double;case"TINYINT":case"SMALLINT":case"MEDIUMINT":case"INT":case"INTEGER":case"SERIAL":case"INT2":return c.ColumnTypeEnum.Int32;case"BIGINT":case"UNSIGNED BIG INT":case"INT8":return c.ColumnTypeEnum.Int64;case"DATETIME":case"TIMESTAMP":return c.ColumnTypeEnum.DateTime;case"TIME":return c.ColumnTypeEnum.Time;case"DATE":return c.ColumnTypeEnum.Date;case"TEXT":case"CLOB":case"CHARACTER":case"VARCHAR":case"VARYING CHARACTER":case"NCHAR":case"NATIVE CHARACTER":case"NVARCHAR":return c.ColumnTypeEnum.Text;case"BLOB":return c.ColumnTypeEnum.Bytes;case"BOOLEAN":return c.ColumnTypeEnum.Boolean;case"JSONB":return c.ColumnTypeEnum.Json;default:return j("unknown decltype:",a),null}}(a);return null===e&&d.add(b),e}),d]);if(0===f.size)return e;a:for(let a of f){for(let d=0;d<b.length;d++){let f=b[d][a];if(null!==f){e[a]=function(a){switch(typeof a){case"string":return c.ColumnTypeEnum.Text;case"bigint":return c.ColumnTypeEnum.Int64;case"boolean":return c.ColumnTypeEnum.Boolean;case"number":return c.ColumnTypeEnum.UnknownNumber;case"object":var b=a;if(b instanceof ArrayBuffer)return c.ColumnTypeEnum.Bytes;throw new k(b);default:throw new k(a)}}(f);continue a}}e[a]=c.ColumnTypeEnum.Int32}return e}(d,e);return{columnNames:b,columnTypes:f,rows:e.map(a=>(function(a,b){let d=[];for(let e=0;e<a.length;e++){let f=a[e];if("number"==typeof f&&(b[e]===c.ColumnTypeEnum.Int32||b[e]===c.ColumnTypeEnum.Int64)&&!Number.isInteger(f)){d[e]=Math.trunc(f);continue}if(["number","bigint"].includes(typeof f)&&b[e]===c.ColumnTypeEnum.DateTime){d[e]=new Date(Number(f)).toISOString();continue}if("bigint"==typeof f){d[e]=f.toString();continue}d[e]=f}return d})(a,f))}}async executeRaw(a){return m("[js::executeRaw] %O",a),(await this.executeIO(a)).changes}executeIO(a){try{let b=a.args.map((b,c)=>l(b,a.argTypes[c],this.adapterOptions)),c=this.client.prepare(a.sql).bind(b).run();return Promise.resolve(c)}catch(a){this.onError(a)}}performIO(a){try{let b=a.args.map((b,c)=>l(b,a.argTypes[c],this.adapterOptions)),c=this.client.prepare(a.sql).bind(b);if(!c.reader)return c.run(),Promise.resolve({columnNames:[],declaredTypes:[],values:[]});let d=c.columns(),e={declaredTypes:d.map(a=>a.type),columnNames:d.map(a=>a.name),values:c.raw().all()};return Promise.resolve(e)}catch(a){this.onError(a)}}onError(a){throw m("Error in performIO: %O",a),new c.DriverAdapterError(function(a){var b;if("string"==typeof(b=a).code&&"string"==typeof b.message)return{originalCode:a.code,originalMessage:a.message,...function(a){switch(a.code){case"SQLITE_BUSY":return{kind:"SocketTimeout"};case"SQLITE_CONSTRAINT_UNIQUE":case"SQLITE_CONSTRAINT_PRIMARYKEY":{let b=a.message.split("constraint failed: ").at(1)?.split(", ").map(a=>a.split(".").pop());return{kind:"UniqueConstraintViolation",constraint:void 0!==b?{fields:b}:void 0}}case"SQLITE_CONSTRAINT_NOTNULL":{let b=a.message.split("constraint failed: ").at(1)?.split(", ").map(a=>a.split(".").pop());return{kind:"NullConstraintViolation",constraint:void 0!==b?{fields:b}:void 0}}case"SQLITE_CONSTRAINT_FOREIGNKEY":case"SQLITE_CONSTRAINT_TRIGGER":return{kind:"ForeignKeyConstraintViolation",constraint:{foreignKey:{}}};default:if(a.message.startsWith("no such table"))return{kind:"TableDoesNotExist",table:a.message.split(": ").at(1)};if(a.message.startsWith("no such column"))return{kind:"ColumnNotFound",column:a.message.split(": ").at(1)};if(a.message.includes("has no column named "))return{kind:"ColumnNotFound",column:a.message.split("has no column named ").at(1)};throw a}}(a)};throw a}(a))}},o=class extends n{constructor(a,b,c,d){super(a,c),this.options=b,this.#a=d}#a;commit(){return m("[js::commit]"),this.#a(),Promise.resolve()}rollback(){return m("[js::rollback]"),this.#a(),Promise.resolve()}},p=class extends n{#b=new h;constructor(a,b){super(a,b)}executeScript(a){try{this.client.exec(a)}catch(a){this.onError(a)}return Promise.resolve()}async startTransaction(a){if(a&&"SERIALIZABLE"!==a)throw new c.DriverAdapterError({kind:"InvalidIsolationLevel",level:a});let b={usePhantomQuery:!1};m("%s options: %O","[js::startTransaction]",b);try{let a=await this.#b.acquire();return this.client.prepare("BEGIN").run(),new o(this.client,b,this.adapterOptions,a)}catch(a){this.onError(a)}}dispose(){return this.client.close(),Promise.resolve()}},q=class{provider="sqlite";adapterName=i;#c;#d;constructor(a,b){this.#c=a,this.#d=b}connect(){return Promise.resolve(new p(r(this.#c),this.#d))}connectToShadowDb(){let a=this.#d?.shadowDatabaseUrl??":memory:";return Promise.resolve(new p(r({...this.#c,url:a}),this.#d))}};function r(a){let{url:b,...c}=a,e=b.replace(/^file:/,""),f=new d.default(e,c);return f.defaultSafeIntegers(!0),f}a.s(["PrismaBetterSqlite3",()=>q])}];

//# sourceMappingURL=node_modules_%40prisma_8d2bd854._.js.map