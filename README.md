# è¡¥ä¹ ç¤¾ç®¡ç†ç³»ç»Ÿ (Tutoring Center Management System)

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„è¡¥ä¹ ç¤¾ç®¡ç†ç³»ç»Ÿï¼Œä½¿ç”¨ Next.js (App Router) + TypeScript + Prisma + PostgreSQL æ„å»ºã€‚

## ğŸš€ æŠ€æœ¯æ ˆ

- **Frontend/Backend**: Next.js 16 (App Router) + TypeScript
- **UI**: TailwindCSS + shadcn/ui (æ·±è‰²ç§‘æŠ€æ„Ÿä¸»é¢˜)
- **Database**: PostgreSQL 14+ + Prisma 7 ORM
- **Auth**: NextAuth.js v5 (Credentials) + bcrypt
- **Calendar**: FullCalendar
- **Excel**: exceljs

## ğŸ“‹ åŠŸèƒ½æ¨¡å—

- âœ… ç”¨æˆ·è®¤è¯ (Admin/Teacher è§’è‰²)
- âœ… å­¦ç”Ÿç®¡ç† (CRUD, æ–°ç”Ÿ/æ—§ç”Ÿæ ‡è¯†, è½¯åˆ é™¤)
- âœ… è€å¸ˆç®¡ç† (CRUD, çŠ¶æ€ç®¡ç†, å¤šç§‘ç›®)
- âœ… è¯¾ç¨‹ç®¡ç† (CRUD, Sessions, è½¯åˆ é™¤)
- âœ… æŠ¥åç®¡ç† (åŠ å…¥/ç§»é™¤, å†å²ä¿ç•™)
- âœ… ç‚¹åç³»ç»Ÿ (å‡ºå¸­/ç¼ºå¸­, å†å²æŸ¥çœ‹)
- âœ… æ—¥å†è§†å›¾ (æœˆ/å‘¨/æ—¥)
- âœ… æ•°æ®ç»Ÿè®¡ (è¯¾æ—¶/å­¦ç”Ÿäººæ•°/ç»­è´¹ç‡)
- âœ… Excel å¯¼å‡º
- âœ… å®¡è®¡æ—¥å¿—

## ğŸ”§ ç¯å¢ƒè¦æ±‚

- Node.js >= 18
- PostgreSQL >= 14
- npm >= 9

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ `.env.example` ä¸º `.env` å¹¶ä¿®æ”¹é…ç½®ï¼š

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```env
# æ•°æ®åº“è¿æ¥ (è¯·ä¿®æ”¹ä¸ºä½ çš„ PostgreSQL é…ç½®)
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/tutoring_center"

# Auth Secret (è‡³å°‘ 32 å­—ç¬¦)
AUTH_SECRET="your-super-secret-key-at-least-32-characters-long"

# App URL
NEXTAUTH_URL="http://localhost:3000"
```

### 3. å®‰è£…å¹¶å¯åŠ¨ PostgreSQL

#### Docker (æ¨è)

```bash
# å¯åŠ¨ PostgreSQL å®¹å™¨
docker run --name tutoring-postgres \
  -e POSTGRES_PASSWORD=postgres \
  -e POSTGRES_DB=tutoring_center \
  -p 5432:5432 \
  -d postgres:14
```

#### macOS (ä½¿ç”¨ Homebrew)

```bash
brew install postgresql@14
brew services start postgresql@14
createdb tutoring_center
```

#### Ubuntu/Debian

```bash
sudo apt update
sudo apt install postgresql postgresql-contrib
sudo systemctl start postgresql
sudo -u postgres createdb tutoring_center
```

### 4. è¿è¡Œæ•°æ®åº“è¿ç§»

```bash
npm run db:migrate
```

é¦–æ¬¡è¿è¡Œæ—¶ï¼Œç³»ç»Ÿä¼šæç¤ºè¾“å…¥è¿ç§»åç§°ï¼Œå¯ä»¥è¾“å…¥ `init`ã€‚

### 5. å¡«å……æµ‹è¯•æ•°æ®

```bash
npm run db:seed
```

### 6. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

è®¿é—® http://localhost:3000

## ğŸ‘¤ æµ‹è¯•å¸å·

| è§’è‰² | Email | å¯†ç  |
|------|-------|------|
| Admin | admin@tutoring.com | admin123 |
| è€å¸ˆ (é™ˆè€å¸ˆ) | chen@tutoring.com | teacher123 |
| è€å¸ˆ (æè€å¸ˆ) | li@tutoring.com | teacher123 |

## ğŸ“ é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ prisma/
â”‚   â”œâ”€â”€ schema.prisma    # æ•°æ®åº“æ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ migrations/      # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”‚   â””â”€â”€ seed.ts          # æµ‹è¯•æ•°æ®
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/         # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ (dashboard)/ # å—ä¿æŠ¤çš„é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ students/
â”‚   â”‚   â”‚   â”œâ”€â”€ teachers/
â”‚   â”‚   â”‚   â”œâ”€â”€ courses/
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ login/       # ç™»å½•é¡µ
â”‚   â”‚   â””â”€â”€ page.tsx     # é¦–é¡µ
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ layout/      # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ providers/   # Context Providers
â”‚   â”‚   â””â”€â”€ ui/          # shadcn/ui ç»„ä»¶
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ prisma.ts    # Prisma å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ auth.ts      # è®¤è¯é…ç½®
â”‚   â”‚   â””â”€â”€ utils.ts     # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ types/           # TypeScript ç±»å‹å®šä¹‰
â””â”€â”€ ...
```

## ğŸ”’ æƒé™è¯´æ˜

### Admin
- å®Œå…¨è®¿é—®æ‰€æœ‰åŠŸèƒ½
- å¯ç®¡ç†æ‰€æœ‰å­¦ç”Ÿã€è€å¸ˆã€è¯¾ç¨‹
- å¯æŸ¥çœ‹æ‰€æœ‰ç»Ÿè®¡æ•°æ®
- å¯å¯¼å‡º Excel

### Teacher
- å¯æŸ¥çœ‹å…¨æ ¡è¯¾ç¨‹æ—¥å†
- åªèƒ½ç¼–è¾‘è‡ªå·±çš„è¯¾ç¨‹
- ä¸èƒ½è®¿é—®å·²åˆ é™¤çš„è¯¾ç¨‹ (403/404)
- ä¸èƒ½ç®¡ç†å…¶ä»–è€å¸ˆçš„æ•°æ®
- status=inactive æ—¶ç¦æ­¢ç™»å½•

## ğŸ“Š ç»Ÿè®¡å£å¾„

### æ—¶é—´å®šä¹‰
- å½“æœˆï¼šè¯¥è‡ªç„¶æœˆ 1 æ—¥ 00:00:00 è‡³æœ€åä¸€æ—¥ 23:59:59ï¼ˆAsia/Hong_Kongï¼‰
- å½’å±ï¼šä»¥ Session.date æ‰€åœ¨æœˆä»½

### è¯¾æ—¶ç»Ÿè®¡
- è¯¾æ—¶ = sum(session.duration_minutes)
- æ”¯æŒ 4 ç§è§†å›¾ï¼šæŒ‰è€å¸ˆå½“æœˆ/ç´¯ç§¯ã€æŒ‰ç§‘ç›®å½“æœˆ/ç´¯ç§¯

### å­¦ç”Ÿäººæ•°ç»Ÿè®¡
- ä»¥ studentCode å»é‡
- åªç»Ÿè®¡è¯¥æœˆæœ‰ session çš„è¯¾ç¨‹çš„å­¦ç”Ÿ
- æ”¯æŒ 4 ç§è§†å›¾ï¼šæŒ‰è€å¸ˆå½“æœˆ/ç´¯ç§¯ã€æŒ‰ç§‘ç›®å½“æœˆ/ç´¯ç§¯

### ç»­è´¹ç‡ç»Ÿè®¡
- è€å¸ˆç»­è´¹ç‡ = æœ¬æœˆè¯¥è€å¸ˆã€Œæ—§å­¦ç”Ÿã€äººæ•° / ä¸Šæœˆè¯¥è€å¸ˆã€Œæ‰€æœ‰å­¦ç”Ÿã€äººæ•° Ã— 100%
- ç§‘ç›®ç»­è´¹ç‡ = æœ¬æœˆè¯¥ç§‘ç›®ã€Œæ—§å­¦ç”Ÿã€äººæ•° / ä¸Šæœˆè¯¥ç§‘ç›®ã€Œæ‰€æœ‰å­¦ç”Ÿã€äººæ•° Ã— 100%
- æ—§å­¦ç”Ÿï¼šåœ¨ä¸Šä¸ªæœˆå·²å­˜åœ¨å¹¶è‡³å°‘ä¿®è¯»è¿‡ä¸€æ¬¡è¯¥è€å¸ˆ/ç§‘ç›®çš„å­¦ç”Ÿ
- åˆ†æ¯ä¸º 0 æ—¶æ˜¾ç¤º 0%
- åŒç§‘æ¢è€å¸ˆï¼šç®—ç§‘ç›®ç»­è´¹ï¼Œä¸ç®—åŸè€å¸ˆç»­è´¹

### æ–°ç”Ÿ/æ—§ç”Ÿå®šä¹‰
- æ–°ç”Ÿï¼šç¬¬ä¸€æ¬¡åŠ å…¥ä»»ä½•è¯¾ç¨‹çš„æœˆä»½æ˜¾ç¤ºæ–°ç”Ÿ
- æ—§ç”Ÿï¼šä¸‹ä¸€ä¸ªè‡ªç„¶æœˆèµ·è‡ªåŠ¨è½¬æ—§ç”Ÿ
- åˆ¤æ–­ä¾æ®ï¼šstudents.first_enrolled_at å­—æ®µ

## ğŸ“ å¸¸ç”¨å‘½ä»¤

```bash
# å¼€å‘
npm run dev           # å¯åŠ¨å¼€å‘æœåŠ¡å™¨

# æ•°æ®åº“
npm run db:migrate    # è¿è¡Œè¿ç§»
npm run db:seed       # å¡«å……æµ‹è¯•æ•°æ®
npm run db:reset      # é‡ç½®æ•°æ®åº“ï¼ˆåˆ é™¤æ‰€æœ‰æ•°æ®å¹¶é‡æ–°è¿ç§»+æ’­ç§ï¼‰
npm run db:studio     # æ‰“å¼€ Prisma Studioï¼ˆå¯è§†åŒ–æ•°æ®åº“ç®¡ç†ï¼‰
npm run db:push       # å¿«é€Ÿæ¨é€ schema å˜æ›´ï¼ˆå¼€å‘ç”¨ï¼‰

# æ„å»º
npm run build         # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run start         # å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm run lint          # è¿è¡Œ ESLint
```

## ğŸŒ æ—¶åŒºè¯´æ˜

ç³»ç»Ÿç»Ÿä¸€ä½¿ç”¨ **Asia/Hong_Kong** æ—¶åŒºã€‚æ‰€æœ‰æ—¥æœŸå’Œç»Ÿè®¡éƒ½åŸºäºé¦™æ¸¯æ—¶é—´è®¡ç®—ã€‚

## ğŸ“‹ Codes è§„åˆ™

- `studentCode`ï¼šAdmin è‡ªç”±è¾“å…¥ï¼Œå…¨ç³»ç»Ÿå”¯ä¸€
- `teacherCode`ï¼šAdmin è‡ªç”±è¾“å…¥ï¼Œå…¨ç³»ç»Ÿå”¯ä¸€
- `courseCode`ï¼šAdmin è‡ªç”±è¾“å…¥ï¼Œå…¨ç³»ç»Ÿå”¯ä¸€
- `sessionCode`ï¼šç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆï¼Œæ ¼å¼ä¸º `${courseCode}-${NN}`ï¼ŒNN ä» 01 èµ·é€’å¢

## ğŸ—‘ï¸ è½¯åˆ é™¤è§„åˆ™

- **Student**: `is_deleted=true` è½¯åˆ é™¤ï¼Œå†å²æ•°æ®ä¿ç•™ä¾›ç»Ÿè®¡
- **Course**: `is_deleted=true` è½¯åˆ é™¤
  - Calendar ä¸å†æ˜¾ç¤º
  - Teacher ä¸èƒ½è¿›å…¥è¯¥è¯¾ç¨‹è¯¦æƒ…ï¼ˆå«ç¡¬è¾“å…¥ URLï¼‰
  - å†å²æ•°æ®ä¿ç•™ä¾›ç»Ÿè®¡

## ğŸ“¤ Excel å¯¼å‡º

åœ¨ã€Œè¯¾æ—¶ç»Ÿè®¡ã€é¡µé¢é€‰æ‹©è€å¸ˆåç‚¹å‡»ã€Œå¯¼å‡º Excelã€æŒ‰é’®ã€‚

å¯¼å‡ºæ ¼å¼ï¼š
- æ–‡ä»¶åï¼š`hours_{teacherCode}_{YYYY-MM}.xlsx`
- æ¯åˆ—ï¼šDate, StartTime, EndTime, DurationMinutes, DurationHours, CourseCode, SessionCode

## ğŸ¨ UI ä¸»é¢˜

é‡‡ç”¨æ·±è‰²ç§‘æŠ€æ„Ÿä¸»é¢˜ï¼š
- ä¸»è‰²è°ƒï¼šéœ“è™¹é’è‰²
- å¼ºè°ƒè‰²ï¼šéœ“è™¹ç´«
- èƒŒæ™¯ï¼šæ·±è“é»‘è‰²æ¸å˜
- å­—ä½“ï¼šOrbitron (æ ‡é¢˜) + Noto Sans SC (æ­£æ–‡)

## ğŸ“¦ æµ‹è¯•æ•°æ®

è¿è¡Œ `npm run db:seed` åä¼šåˆ›å»ºä»¥ä¸‹æµ‹è¯•æ•°æ®ï¼š

### è€å¸ˆ
- é™ˆè€å¸ˆ (T001) - æ•°å­¦ã€M1ã€M2
- æè€å¸ˆ (T002) - è‹±æ–‡

### å­¦ç”Ÿ
- å¼ å°æ˜ (S001) - S4 - æ—§ç”Ÿ
- ç‹å°çº¢ (S002) - S5 - æ—§ç”Ÿ
- æå°å (S003) - S3 - æ–°ç”Ÿ
- é™ˆå°é¾™ (S004) - S6 - æ–°ç”Ÿ
- æ—å°ç‡• (S005) - P6 - æœªæŠ¥å

### è¯¾ç¨‹
- MATH-S4-001 - é™ˆè€å¸ˆçš„æ•°å­¦è¯¾ (4 ä¸ª Sessions)
- ENG-S5-001 - æè€å¸ˆçš„è‹±æ–‡è¯¾ (2 ä¸ª Sessions)
- M1-S6-001 - é™ˆè€å¸ˆçš„ M1 è¯¾ (1 ä¸ª Sessionï¼Œä¸Šæœˆ)

## ğŸ“„ License

MIT
